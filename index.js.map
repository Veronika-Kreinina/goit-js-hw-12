{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nexport function addLoader(gallery) {\n    const addedLoader = `\n    <div class=\"loader-container\">\n    <span class=\"loader-text\">Loading images, please wait...</span>\n    </div>\n  `;\n    gallery.insertAdjacentHTML('afterend', addedLoader);\n}\n\nexport function removeLoader() {\n  const loader = document.querySelector('.loader-container');\n  if (loader) {\n    loader.remove();\n  }\n}\n\nexport function createMarkup(data) {\n  return data.hits\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n            <li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                  class=\"gallery-image\"\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n                  loading=\"lazy\"\n                  \n                />\n              </a>\n              <ul class=\"img-wrapper\">\n                <li class=\"img-descr\">Likes<span>${likes}</span></li>\n                <li class=\"img-descr\">Views<span>${views}</span></li>\n                <li class=\"img-descr\">Comments<span>${comments}</span></li>\n                <li class=\"img-descr\">Downloads<span>${downloads}</span></li>\n              </ul>\n            </li>\n      `\n    )\n    .join('');\n}\n\nexport function showBtn() {\n    const loadMoreBtn = document.querySelector('.js-btn-wrapper');\n\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nexport function hideBtn() {\n    const loadMoreBtn = document.querySelector('.js-btn-wrapper');\n\n    loadMoreBtn.classList.add('is-hidden');\n}","import axios from \"axios\";\n    const BASE_URL = 'https://pixabay.com/api/';\n    const API_KEY = '46105893-c3619f828e66c5e4a4f6c6159';\n\nexport async function getGalleryData(query, page =15,per_page=15) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page,\n    },\n  });\n  return response.data;\n}\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { addLoader, removeLoader,createMarkup } from \"./js/render-functions\";\nimport { showBtn, hideBtn } from \"./js/render-functions\";\nimport { getGalleryData } from \"./js/pixabay-api\";\n\n\nconst form = document.querySelector('.js-search-form');\nconst galleryList = document.querySelector('.js-gallery');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.js-btn-wrapper');\n\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet searchValue = '';\nlet currentPage = 1;\nlet totalHits = 0;\nform.addEventListener('submit', onSubmitForm);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nhideBtn()\n\nfunction resetSearch() {\n  gallery.innerHTML = '';\n  hideBtn();\n  currentPage = 1;\n  totalHits = 0;\n}\n\nasync function onSubmitForm(event) {\n  event.preventDefault();\n\n  const formData = new FormData(event.target);\n  const { search } = Object.fromEntries(formData.entries());\n  searchValue = search.trim();\n\n  if (!searchValue) {\n    iziToast.error({\n      title: 'Error',\n      message: 'The search query is empty.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  resetSearch();\n  addLoader(gallery);\n\n  try {\n    const data = await getGalleryData(searchValue, currentPage);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      iziToast.info({\n        position: 'topRight',\n        title: 'Info',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n\n    renderGallery(data);\n    lightbox.refresh();\n    showBtn();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Error: ${error.message}`,\n      position: 'topRight',\n    });\n  } finally {\n    removeLoader();\n  }\n}\n\nasync function onLoadMore() {\n  currentPage += 1;\n  addLoader(gallery);\n\n  try {\n    const data = await getGalleryData(searchValue, currentPage);\n    renderGallery(data);\n    lightbox.refresh();\n    smoothScroll();\n\n      \n      \n      if (gallery.children.length > totalHits) {\nhideBtn()\n      iziToast.info({\n        position: 'topRight',\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    \n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Error: ${error.message}`,\n      position: 'topRight',\n    });\n  } finally {\n    removeLoader();\n  }\n}\n\nfunction renderGallery(data) {\n  const galleryMarkup = createMarkup(data);\n  gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}"],"names":["addLoader","gallery","removeLoader","loader","createMarkup","data","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showBtn","hideBtn","BASE_URL","API_KEY","getGalleryData","query","page","per_page","axios","form","loadMoreBtn","lightbox","SimpleLightbox","searchValue","currentPage","totalHits","onSubmitForm","onLoadMore","resetSearch","event","formData","search","iziToast","renderGallery","error","smoothScroll","galleryMarkup","cardHeight"],"mappings":"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"}